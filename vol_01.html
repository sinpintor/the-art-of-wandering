<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'Ã‰VASION â€” Vol. 01</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Noto+Serif+TC:wght@200;300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --black: #0a0a0a; --white: #fdfdfd; --grey: #777777; }
        ::-webkit-scrollbar { display: none; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; font-family: 'Montserrat', 'Noto Serif TC', sans-serif; background-color: var(--black); color: var(--white); overflow-x: hidden; scrollbar-width: none; }

        /* åº•ç‰‡å™ªé» */
        .noise {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none; z-index: 9999;
            background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="n"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23n)" opacity="0.05"/%3E%3C/svg%3E');
        }

        /* ç¬¬ä¸€å±¤ï¼šVol. 01 å°ˆå±¬æ•…äº‹æ•˜äº‹ */
        #preface-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            background: linear-gradient(rgba(0,0,0,0.2), rgba(10,10,10,0.9)), url('https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?q=80&w=2000&auto=format&fit=crop') center/cover no-repeat;
            z-index: 20; transition: opacity 1.5s cubic-bezier(0.25, 1, 0.5, 1), transform 1.5s ease;
            padding: 40px; box-sizing: border-box; text-align: center;
        }
        .preface-content { max-width: 550px; }
        .preface-content h2 { font-family: 'Playfair Display', serif; font-size: 0.7rem; letter-spacing: 0.6em; text-transform: uppercase; color: var(--grey); margin-bottom: 30px; font-weight: 300; }
        .preface-text { font-family: 'Noto Serif TC', serif; font-size: 0.95rem; line-height: 2.2; color: #ccc; font-weight: 200; letter-spacing: 0.05em; margin-bottom: 50px; }
        .action-btn-outline { font-family: 'Montserrat', sans-serif; font-size: 0.65rem; letter-spacing: 0.4em; text-transform: uppercase; background: transparent; border: 1px solid var(--white); padding: 18px 40px; cursor: pointer; color: var(--white); transition: 0.5s; }
        .action-btn-outline:hover { background: var(--white); color: var(--black); }

        /* ç¬¬äºŒå±¤ï¼šGenerator æŠ½ç±¤ä»‹é¢ */
        #generator-layer {
            position: absolute; top: 0; left: 0; width: 100%; min-height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            background-color: var(--black); z-index: 10; opacity: 0; pointer-events: none;
            padding: 40px 20px; box-sizing: border-box; transition: opacity 1s ease;
        }
        .layout { width: 100%; max-width: 420px; text-align: center; }
        .nav-back { font-size: 0.6rem; letter-spacing: 0.3em; text-transform: uppercase; cursor: pointer; color: var(--grey); margin-bottom: 60px; display: inline-block; text-decoration: none; }
        
        .result-area { min-height: 160px; display: flex; flex-direction: column; justify-content: center; margin-bottom: 30px; }
        .result-box { font-family: 'Noto Serif TC', serif; font-size: 2.5rem; font-weight: 200; letter-spacing: 0.15em; color: var(--white); line-height: 1.4; }
        .result-count { font-size: 0.55rem; color: #444; margin-top: 15px; letter-spacing: 0.3em; text-transform: uppercase; }

        .mission-box { font-family: 'Noto Serif TC', serif; font-size: 0.85rem; color: #888; padding: 25px 0; margin-bottom: 40px; border-top: 1px solid #1a1a1a; border-bottom: 1px solid #1a1a1a; line-height: 2; font-weight: 200; display: none; text-align: justify; }
        
        .draw-btn { font-family: 'Montserrat', sans-serif; font-size: 0.7rem; padding: 20px; cursor: pointer; border: none; background: var(--white); color: var(--black); width: 100%; letter-spacing: 0.4em; text-transform: uppercase; font-weight: 600; transition: 0.4s; }
        .confirm-btn { font-family: 'Montserrat', sans-serif; font-size: 0.65rem; padding: 18px; cursor: pointer; border: 1px solid #333; background: transparent; color: var(--white); width: 100%; letter-spacing: 0.3em; text-transform: uppercase; margin-top: 15px; }
        
        .history-reset { font-size: 0.55rem; color: #333; background: none; border: none; margin-top: 30px; letter-spacing: 0.2em; cursor: pointer; }

        .hidden { opacity: 0; transform: scale(1.05); pointer-events: none; }
    </style>
</head>
<body>

    <div class="noise"></div>

    <section id="preface-layer">
        <div class="preface-content">
            <h2>Vol. 01 â€” The Travel Issue</h2>
            <p class="preface-text">
                å¼•æ“ç™¼å‹•çš„ç¬é–“ï¼Œè»Šå»‚å…§å°±æˆäº†ä¸€å€‹ç¨ç«‹çš„å®‡å®™ã€‚<br><br>
                ä½ æ˜¯é§•é§›ä½ä¸Šçš„æŒèˆµè€…ï¼Œæˆ‘æ˜¯å‰¯é§•ä½ä¸Šçš„è§€å¯Ÿè€…ã€‚æˆ‘å€‘ä¸å†è¨è«–ç›®çš„åœ°ï¼Œåªè¨è«–æ­¤æ™‚æ­¤åˆ»ã€‚ç•¶å°èˆªçš„è²éŸ³æ¶ˆå¤±ï¼Œçª—å¤–çš„é¢¨æ™¯æ‰é–‹å§‹æœ‰äº†æ„ç¾©ã€‚<br><br>
                åœ¨é‚£äº›å¾æœªè½èçš„åœ°åè£¡ï¼Œéš±è—è‘—å®‡å®™ç‚ºæˆ‘å€‘é¡¯åŒ–çš„é©šå–œã€‚
            </p>
            <button class="action-btn-outline" onclick="showGenerator()">Start Wandering</button>
        </div>
    </section>

    <section id="generator-layer">
        <div class="layout">
            <a href="index.html" class="nav-back">â† Back to Archives</a>
            
            <div class="result-area">
                <div class="result-box" id="result">The Unknown</div>
                <div class="result-count" id="visited-count">Footprints: 0 regions</div>
            </div>

            <div class="mission-box" id="mission-box"></div>

            <div class="btn-group">
                <button class="draw-btn" id="main-draw-btn" onclick="startRolling()">Seek Path</button>
                <button class="confirm-btn" id="confirm-btn" style="display:none;" onclick="confirmArrival()">Check-in Location</button>
                <button class="history-reset" onclick="clearHistory()">Reset Memory</button>
            </div>
        </div>
    </section>

<script>
    // é€™è£¡æ”¾å…¥èˆ‡ä¸Šä¸€ç‰ˆç›¸åŒçš„å°ç£è¡Œæ”¿å€è³‡æ–™ (ç‚ºäº†ç°¡æ½”ï¼Œä»¥ä¸‹çœç•¥è³‡æ–™åº«éƒ¨åˆ†ï¼Œå¯¦ä½œæ™‚è«‹ä¿ç•™ä¸Šä¸€ç‰ˆçš„è³‡æ–™)
    const taiwanData = { "åŸºéš†å¸‚": ["ä»æ„›å€", "ä¿¡ç¾©å€", "ä¸­æ­£å€", "ä¸­å±±å€", "å®‰æ¨‚å€", "æš–æš–å€", "ä¸ƒå µå€"], /* ... å…¶é¤˜ç¸£å¸‚è³‡æ–™ ... */ };

    let visitedPlaces = JSON.parse(localStorage.getItem('visitedPlaces')) || [];
    let currentResult = "";

    function showGenerator() {
        document.getElementById('preface-layer').classList.add('hidden');
        setTimeout(() => { 
            document.getElementById('generator-layer').style.opacity = '1'; 
            document.getElementById('generator-layer').style.pointerEvents = 'auto'; 
            updateVisitedCount();
        }, 800);
    }

    function updateVisitedCount() {
        document.getElementById('visited-count').innerText = `Footprints: ${visitedPlaces.length} regions`;
    }

    function startRolling() {
        const resultBox = document.getElementById('result');
        const confirmBtn = document.getElementById('confirm-btn');
        const missionBox = document.getElementById('mission-box');
        confirmBtn.style.display = "none";
        missionBox.style.display = "none";
        
        let counter = 0;
        let roll = setInterval(() => {
            const counties = Object.keys(taiwanData);
            const rC = counties[Math.floor(Math.random() * counties.length)];
            const rT = taiwanData[rC][Math.floor(Math.random() * taiwanData[rC].length)];
            resultBox.innerText = `${rC} ${rT}`;
            counter++;
            if (counter > 20) {
                clearInterval(roll);
                pickFinal();
            }
        }, 50);
    }

    function pickFinal() {
        const counties = Object.keys(taiwanData);
        let available = [];
        counties.forEach(c => {
            taiwanData[c].forEach(t => {
                const place = `${c} ${t}`;
                if (!visitedPlaces.includes(place)) available.push(place);
            });
        });

        if (available.length === 0) {
            document.getElementById('result').innerText = "World Explored.";
            return;
        }

        currentResult = available[Math.floor(Math.random() * available.length)];
        document.getElementById('result').innerText = currentResult;
        document.getElementById('confirm-btn').style.display = "block";
        
        const missions = ["å°‹æ‰¾ç•¶åœ°æœ€è€çš„ä¸€æ£µæ¨¹ä¸¦åˆå½±", "åœ¨ç•¶åœ°é›œè²¨åº—è²·ä¸€æ¨£æ²’è¦‹éçš„å°é›¶é£Ÿ", "æ‰¾ä¸€å€‹èƒ½çœ‹è¦‹åœ°å¹³ç·šçš„é«˜è™•ç™¼å‘†ååˆ†é˜", "ç‚ºå½¼æ­¤æ‹ä¸€å¼µå¸¶æœ‰ç•¶åœ°è·¯æ¨™çš„ç‰¹å¯«ç…§ç‰‡"];
        document.getElementById('mission-box').innerText = missions[Math.floor(Math.random() * missions.length)];
        document.getElementById('mission-box').style.display = "block";
    }

    function confirmArrival() {
        if (!visitedPlaces.includes(currentResult)) {
            visitedPlaces.push(currentResult);
            localStorage.setItem('visitedPlaces', JSON.stringify(visitedPlaces));
            updateVisitedCount();
            alert(`ğŸ“ ${currentResult} å·²å­˜å…¥å›æ†¶æ¸…å–®`);
            document.getElementById('confirm-btn').style.display = "none";
        }
    }

    function clearHistory() {
        if (confirm("ç¢ºå®šè¦é‡ç½®æ‰€æœ‰è¶³è·¡ç´€éŒ„å—ï¼Ÿ")) {
            visitedPlaces = [];
            localStorage.removeItem('visitedPlaces');
            updateVisitedCount();
        }
    }
</script>
</body>
</html>
